---
import { formations, type Formation } from '../../data/formations';
import Avantages from './Avantages.astro';
import DownloadButton from './DownloadButton.astro';

// Convertir l'objet formations en tableau
const formationsArray = Object.values(formations);
---

<section class="py-12 md:flex md:flex-row md:justify-center md:items-center md:pl-32 2xl:pl-72 2xl:gap-16">
  <Avantages />
  <div class="relative py-4 gradient-bg text-white px-8 mt-6 md:w-1/2 md:h-fit md:p-10 md:mt-0 2xl:pl-5">
    <p class="relative z-10 py-6 font-bestley text-5xl md:text-6xl md:leading-8 font-bold px-10 md:px-32 2xl:text-6xl 2xl:px-52 text-center leading-10 2xl:leading-12">
      <span class="text-nowrap 2xl:text-8xl">2</span> jours <span class="font-montserrat text-xl md:text-2xl 2xl:text-3xl text-nowrap">de formation</span>
    </p>
  </div>
</section>

{formationsArray.map((formation, index) => (
  <div id={formation.title} class={`flex flex-col items-center 2xl:items-start mt-12 mb-32 2xl:mb-0 ${index === 0 ? 'md:flex-row-reverse md:pr-20' : 'md:flex-row md:pl-20'} md:gap-20 md:mt-10 md:justify-center`}>
    <article class={`w-full px-8 md:w-1/2 ${index === 0 ? '2xl:pr-36' : '2xl:pl-36'} flex flex-col`}>
      <h3 class="text-white text-lg 2xl:text-xl font-semibold font-bestley 2xl:mt-16">
       {formation.subTitle}
      </h3>
      <h2 class="text-xl 2xl:text-3xl font-semibold text-white font-bestley mb-6 2xl:mb-0">
       {formation.title}
      </h2>
      <p class="text-white mb-2 2xl:text-xl">
        {formation.description.map((item: string) => (
          <p class="text-white mb-2 2xl:text-xl 2xl:mt-10">{item}</p>
        ))}
      </p>
      <DownloadButton 
        filePath={formation.brochure.path}
        fileName={formation.brochure.fileName}
        class="gradient-hover"
      />
    </article>
    <div class="relative flex justify-center items-center w-[100vw] md:w-1/2 2xl:mb-40">
      <img src={formation.image} alt={formation.title} class="w-full h-auto md:h-[400px] 2xl:h-full object-cover mt-10 md:mt-0" />
      <img src="/assets/sign.svg" alt="" class="absolute w-15 h-15 bottom-2 right-5" />
    </div>
  </div>
))}

<style>
  .gradient-bg {
    background: linear-gradient(
      45deg,
      rgba(65, 88, 208, 0.8) 0%,
      rgba(199, 81, 192, 0.8) 50%,
      rgba(255, 203, 112, 0.8) 100%
    );
  }
</style>